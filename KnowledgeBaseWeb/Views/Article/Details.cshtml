@using System.Globalization
@model KnowledgeBaseWeb.Models.ArticleCommentsViewModel;

@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_LayoutMain.cshtml";
}

<main class="max-w-4xl mx-auto px-4 py-8">
    <article class="bg-white rounded-lg shadow-sm p-6 md:p-8">
        <!-- Article Header -->
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">@Model.Article.Title</h1>
            <div class="flex flex-wrap items-center text-sm text-gray-500 gap-4">
                <span><i class="far fa-clock mr-1"></i> Date Created updated @Model.Article.CreatedDate?.ToString("dd MMM yyyy", CultureInfo.InvariantCulture)</span>
                <span>
                    <i class="far fa-clock mr-1"></i> Last updated @Model.Article.LastModifiedDate?.ToString("dd MMM yyyy", CultureInfo.InvariantCulture)
                </span>
                <span><i class="far fa-eye mr-1"></i> 2.5k views</span>
                <span><i class="far fa-user mr-1"></i> By @Model.Article.User.FirstName &nbsp; @Model.Article.User.LastName</span>
            </div>
        </header>
        <div class="bg-gray-50 rounded-lg p-4 mb-8">
            <h2 class="text-lg font-semibold mb-3">Article Attributes</h2>
            <ul class="space-y-2">
                <li><p class="text-indigo-600 hover:text-indigo-400">Category > @Model.Article.Category.Name</p></li>
                <li><p class="text-indigo-600 hover:text-indigo-400">Value Stream > @Model.Article.ValueStream.Name</p></li>
                <li><p class="text-indigo-600 hover:text-indigo-400">Product > @Model.Article.Product.Name</p></li>
            </ul>
        </div>
        <section id="steps" class="mb-8">
            <div class="space-y-4">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <p class="text-gray-700">@Model.Article.Content</p>
                </div>
            </div>
        </section>

        <!-- Article Footer -->
        <footer class="mt-8 pt-8 border-t">
            <div class="flex flex-wrap justify-between items-center">
                <div class="text-sm text-gray-500">
                    Was this article helpful?
                    <a class="ml-2 text-gray-400 hover:text-green-500" asp-action='LikeCount' asp-route-id='@Model.Article.ArticleId'><i class="far fa-thumbs-up"></i></a> @Model.Article.LikeCount
                </div>
                <div class="flex space-x-4">
                    <button class="text-gray-500 hover:text-indigo-600">
                        <i class="fas fa-print mr-1"></i> Print
                    </button>
                    <button class="text-gray-500 hover:text-indigo-600">
                        <i class="fas fa-share-alt mr-1"></i> Share
                    </button>
                </div>
            </div>
        </footer>

    </article>


    <!-- Add Comment -->
    <div class="relative">

        @using (Html.BeginForm("Create", "Comment", FormMethod.Post, new { encypt = "multipart/form-data", @class = "form-group" }))
        {
            <textarea required type="text" name="content" placeholder="Leave your comment below" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></textarea>


            <button class="text-gray-300 btn btn-primary">Add Comment</button>

            <input name="articleId" type="text" value="@Model.Article.ArticleId" style="display:none">
            <input name="userId" type="text" value="@Model.Article.User.UserId" style="display:none">
        }
    </div>
    <!-- Related Comments -->
    <section class="mt-8">
        <h2 class="text-xl font-bold mb-4">Comments</h2>

        @foreach (var item in Model.Comments)
        {
            <div class="grid grid-cols-1 md:grid-cols-1 gap-4">
                <a href="#" class="block bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow" style="text-decoration:none">
                    <h6 class="font-semibold text-indigo-600"><i class="fa fa-user" aria-hidden="true"> @item.AuthorName</i> </h6>
                    <p class="text-gray-600 text-sm mt-1">@item.Content</p>
                </a>
            </div>
            <br />
        }
    </section>
    <!-- Related Articles -->
    <section class="mt-8">
        <h2 class="text-xl font-bold mb-4">Related Articles</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <a href="#" class="block bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                <h3 class="font-semibold text-indigo-600">Getting Started Guide</h3>
                <p class="text-gray-600 text-sm mt-1">Learn the basics of using our platform</p>
            </a>
            <a href="#" class="block bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow">
                <h3 class="font-semibold text-indigo-600">Advanced Settings</h3>
                <p class="text-gray-600 text-sm mt-1">Customize your experience with advanced options</p>
            </a>
        </div>
    </section>
</main>

